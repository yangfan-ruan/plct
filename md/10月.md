10月:compile系列使用

```bash
BuildRequires:       java-11-openjdk-devel
Requires:            java-11-openjdk

export JAVA_HOME=%{_jvmdir}/java-11-openjdk

* Sat Oct 12 2024 Yangfan Ruan <yangfan.oerv@isrc.iscas.ac.cn> - 1.1.10-3
- compile with openjdk11

```

> [报错：package javax.mail does not exist_javax.mail不存在](https://blog.csdn.net/guotong1988/article/details/127120463)
>
> [package javax.activation does not exist and mvn install not ...](https://stackoverflow.com/questions/61367969/java-mvn-package-javax-activation-does-not-exist-and-mvn-install-not-solving-it)
>
> [Java 项目编译的时候提示javax.xml.bind.annotation does ...](https://blog.csdn.net/huyuchengus/article/details/124673404)
>
> [Java工程找不到javax.xml.bind.annotation包原创](https://blog.csdn.net/scruffybear/article/details/134877513)
>
> [package javax.xml.bind.annotation does not exist error](https://stackoverflow.com/questions/68892633/package-javax-xml-bind-annotation-does-not-exist-error)
>
> [jboss-logmanager](https://gitee.com/src-openeuler/jboss-logmanager/blob/master/jboss-logmanager.spec#)

```bash
# `%`开头的部分是宏或指令，它们用于处理变量、配置编译和安装过程。
%global namedreltag .Final # 这行定义了一个全局变量`namedreltag`，值为`.Final`。它可以在文件的其他部分被引用，表示版本的后缀。
%global namedversion %{version}%{namedreltag} # 这是一个全局变量`namedversion`，它的值是由`%{version}`和`%{namedreltag}`拼接而成。这里的`%{version}`是另一个变量，表示当前的版本号，`%{namedreltag}`则是刚定义的`.Final`。所以`namedversion`变量将包含类似`3.0.19.Final`这样的版本标识。
Name:                resteasy
Version:             3.0.19
Release:             6
Summary:             Framework for RESTful Web services and Java applications
License:             ASL 2.0 and CDDL-1.0
URL:                 https://github.com/resteasy/Resteasy/
Source0:             https://github.com/resteasy/Resteasy/archive/%{namedversion}/%{name}-%{namedversion}.tar.gz
Patch0:              resteasy-3.0.19-Mime4j-0.7.2-support.patch
Patch1:              resteasy-3.0.19-port-resteasy-netty-to-netty-3.10.6.patch
Patch2:              CVE-2016-9606.patch
Patch3:              CVE-2021-20289.patch
Patch4:              CVE-2020-10688-1.patch

BuildArch:           noarch # 指定此包为`noarch`，意味着这个包不依赖特定的硬件架构，可以在任何架构上安装。
BuildRequires:       maven-local mvn(com.beust:jcommander) mvn(com.fasterxml:classmate) # 列出了在构建包时所需要的依赖项。这些依赖项是通过Maven构建工具管理的Java库。`mvn(...)`表示所需的Maven坐标，比如`mvn(io.netty:netty:3)`表示需要Netty 3.x版本的依赖。
BuildRequires:       mvn(com.fasterxml.jackson.core:jackson-annotations)
BuildRequires:       mvn(com.fasterxml.jackson.core:jackson-core)
BuildRequires:       mvn(com.fasterxml.jackson.core:jackson-databind)
BuildRequires:       mvn(com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider)
BuildRequires:       mvn(com.google.inject:guice) mvn(com.sun.mail:javax.mail)
BuildRequires:       mvn(com.sun.xml.bind:jaxb-impl) mvn(com.sun.xml.fastinfoset:FastInfoset)
BuildRequires:       mvn(commons-io:commons-io) mvn(io.netty:netty:3) mvn(io.netty:netty-all)
BuildRequires:       mvn(io.undertow:undertow-core) mvn(io.undertow:undertow-servlet)
BuildRequires:       mvn(javax.enterprise:cdi-api) mvn(javax.json:javax.json-api)
BuildRequires:       mvn(javax.validation:validation-api) mvn(junit:junit) mvn(log4j:log4j:12)
BuildRequires:       mvn(net.jcip:jcip-annotations) mvn(net.oauth.core:oauth-provider)
BuildRequires:       mvn(org.apache.httpcomponents:httpclient)
BuildRequires:       mvn(org.apache.james:apache-mime4j-core)
BuildRequires:       mvn(org.apache.james:apache-mime4j-dom)
BuildRequires:       mvn(org.apache.james:apache-mime4j-storage)
BuildRequires:       mvn(org.apache.maven.plugins:maven-source-plugin)
BuildRequires:       mvn(org.bouncycastle:bcmail-jdk15on) mvn(org.bouncycastle:bcprov-jdk15on)
BuildRequires:       mvn(org.codehaus.jackson:jackson-core-asl)
BuildRequires:       mvn(org.codehaus.jackson:jackson-jaxrs)
BuildRequires:       mvn(org.codehaus.jackson:jackson-mapper-asl)
BuildRequires:       mvn(org.codehaus.jackson:jackson-xc) mvn(org.codehaus.jettison:jettison)
BuildRequires:       mvn(org.eclipse.jetty:jetty-server) mvn(org.glassfish:javax.el)
BuildRequires:       mvn(org.glassfish:javax.json) mvn(org.hibernate:hibernate-validator)
BuildRequires:       mvn(org.hibernate.javax.persistence:hibernate-jpa-2.0-api)
BuildRequires:       mvn(org.infinispan:infinispan-core) mvn(org.jboss:jboss-parent:pom:)
BuildRequires:       mvn(org.jboss.jandex:jandex-maven-plugin) mvn(org.jboss.logging:jboss-logging)
BuildRequires:       mvn(org.jboss.logging:jboss-logging-annotations)
BuildRequires:       mvn(org.jboss.logging:jboss-logging-processor)
BuildRequires:       mvn(org.jboss.spec.javax.annotation:jboss-annotations-api_1.2_spec)
BuildRequires:       mvn(org.jboss.spec.javax.ejb:jboss-ejb-api_3.1_spec)
BuildRequires:       mvn(org.jboss.spec.javax.el:jboss-el-api_3.0_spec)
BuildRequires:       mvn(org.jboss.spec.javax.servlet:jboss-servlet-api_2.5_spec)
BuildRequires:       mvn(org.jboss.spec.javax.servlet:jboss-servlet-api_3.1_spec)
BuildRequires:       mvn(org.jboss.spec.javax.ws.rs:jboss-jaxrs-api_2.0_spec)
BuildRequires:       mvn(org.jboss.weld:weld-api) mvn(org.picketbox:picketbox)
BuildRequires:       mvn(org.slf4j:slf4j-api) mvn(org.yaml:snakeyaml)
BuildRequires:       mvn(org.jboss.spec.javax.nnotation:jboss-annotations-api_1.2_spec)
No matching package 'mvn(org.jboss.spec.javax.nnotation:jboss-annotations-api_1.2_spec)
BuildRequires:       java-11-openjdk-devel
Requires:            java-11-openjdk
Requires:            javapackages-tools
Requires:            resteasy-core = %{version}-%{release}
Requires:            resteasy-atom-provider = %{version}-%{release}
Requires:            resteasy-jackson-provider = %{version}-%{release}
Requires:            resteasy-jackson2-provider = %{version}-%{release}
Requires:            resteasy-jaxb-provider = %{version}-%{release}
Requires:            resteasy-jettison-provider = %{version}-%{release}
Requires:            resteasy-json-p-provider = %{version}-%{release}
Requires:            resteasy-multipart-provider = %{version}-%{release}
Requires:            resteasy-validator-provider-11 = %{version}-%{release}
Requires:            resteasy-yaml-provider = %{version}-%{release}
Requires:            resteasy-client = %{version}-%{release}
Requires:            resteasy-optional = %{version}-%{release} resteasy-test = %{version}-%{release}
Requires:            resteasy-netty3 = %{version}-%{release}

%description # 用于定义包的描述信息。它通常出现在每个包的描述部分，解释该包的功能和用途。在最终的 RPM 包生成后，这段描述将出现在 RPM 包的元数据中，供用户查看。
%global desc \ # 这一行定义了一个全局宏 `desc`，这个宏包含了一段文字描述。反斜杠 (`\`) 用于表示这段描述可以跨多行写。
RESTEasy contains a JBoss project that provides frameworks to help\
build RESTful Web Services and RESTful Java applications. It is a fully\
certified and portable implementation of the JAX-RS specification. # `RESTEasy` 是一个 JBoss 项目，提供了框架以帮助构建 RESTful Web 服务和 Java 应用程序，并且是 JAX-RS 规范的完全认证和可移植的实现。
%{desc} # 引用之前定义的宏 `desc`，等价于在该位置插入之前定义的那段完整的描述。这避免了重复编写相同的文字。
%global extdesc %{desc}\ # 这一行定义了另一个全局宏 `extdesc`，它直接引用了前面定义的 `desc` 宏的内容，并使用反斜杠表示可以跨多行书写。这一行的作用是创建一个与 `desc` 内容完全相同的宏 `extdesc`，这样在描述中可以通过引用 `extdesc` 来复用同样的描述。
\
This package contains # 这一行是包的实际描述的一部分，接下来的内容将描述该软件包的具体包含内容

# 这些 `package` 块是为了定义 `Resteasy` 项目在 RPM 包中的多个子包。每个子包对应特定的模块或功能组件，方便用户按需安装所需的部分，而不是整个项目
%package        javadoc # 这个子包用于提供 `Resteasy` 项目的 Javadoc 文档，也就是 API 文档。安装这个包后，用户可以查看 Resteasy 的详细 Java 类和方法文档。
Summary:             Javadoc for %{name}
%description    javadoc
This package contains the API documentation for %{name}.

%package        core # 包含 `Resteasy` 的核心模块，这是 RESTful Web 服务的基本实现部分。它是所有其他模块的基础。
Summary:             Core modules for %{name}
Obsoletes:           resteasy-jaxrs-api < 3.0.7
%description    core
%{extdesc} %{summary}. # 包含核心功能的简要描述

%package        atom-provider # 这是 `Resteasy` 用于处理 Atom 格式（主要用于Web feeds，例如 RSS feed）的模块。
Summary:             Module atom-provider for %{name}
%description    atom-provider
%{extdesc} %{summary}.

%package        jackson-provider # 这个模块为 `Resteasy` 提供 `Jackson` 支持，`Jackson` 是一个常用的 JSON 序列化和反序列化库。
Summary:             Module jackson-provider for %{name}
%description    jackson-provider
%{extdesc} %{summary}.

%package        jackson2-provider # 类似 `jackson-provider`，但支持 `Jackson 2.x` 版本。`Jackson 2` 是 `Jackson` 的更新版本，提供更强大的 JSON 处理功能。
Summary:             Module jackson2-provider for %{name}
%description    jackson2-provider
%{extdesc} %{summary}.

%package        jaxb-provider
Summary:             Module jaxb-provider for %{name}
%description    jaxb-provider
%{extdesc} %{summary}.

%package        jettison-provider
Summary:             Module jettison-provider for %{name}
%description    jettison-provider
%{extdesc} %{summary}.

%package        json-p-provider
Summary:             Module json-p-provider for %{name}
%description    json-p-provider
%{extdesc} %{summary}.

%package        multipart-provider
Summary:             Module multipart-provider for %{name}
%description    multipart-provider
%{extdesc} %{summary}.

%package        netty3
Summary:             Netty 3 Integration for %{name}
%description    netty3
%{extdesc} %{summary}.

%package        validator-provider-11
Summary:             Module validate-provider-11 for %{name}
%description    validator-provider-11
%{extdesc} %{summary}.

%package        yaml-provider
Summary:             Module yaml-provider for %{name}
%description    yaml-provider
%{extdesc} %{summary}.

%package        client
Summary:             Client for %{name}
%description    client
%{extdesc} %{summary}.

%package        optional
License:             ASL 2.0 and BSD and LGPLv2+
Summary:             Optional modules for %{name}
%description    optional
%{extdesc} %{summary}.

%package        test
Summary:             Test modules for %{name}
%description    test
%{extdesc} %{summary}.

#这些包分为核心功能（`core`）、不同的数据格式支持（如 `atom-provider`、`json-p-provider` 等）、客户端支持（`client`）、测试支持（`test`）等模块化的组件，用户可以根据需要安装这些模块来扩展 `Resteasy` 的功能。


%prep # `%prep` 表示“准备”阶段。在这个阶段，会解压缩源代码并准备构建过程所需的依赖和配置。通常它是构建的第一步。
%setup -q -n Resteasy-%{namedversion} # `%setup` 是用于解压源代码的宏。 `-n Resteasy-%{namedversion}`：指定了解压后的目录名为 `Resteasy-%{namedversion}`，这里的 `%{namedversion}` 是前面定义的宏（例如 `3.0.19.Final`），因此解压后目录名可能是 `Resteasy-3.0.19.Final`。

# 这些命令使用了 Maven 打包相关的宏 `mvn_package`，用于指定要构建和安装的 Maven 包，以及它们的分组。
# **格式**：`%mvn_package "<Maven artifact ID>" <package name>`
# - `"<Maven artifact ID>"`：Maven 中每个依赖项的标识符（`artifactId`），它是 Maven 坐标的一部分。它用来指定哪个 Maven 项目或模块需要被打包。
# - `<package name>`：表示将此 Maven 包归类到哪个 RPM 子包。例如 `core`、`atom-provider`、`jackson-provider` 等。
# - `<package name>`：表示将此 Maven 包归类到哪个 RPM 子包。例如 `core`、`atom-provider`、`jackson-provider` 等。
# - **atom-provider**、**jackson-provider**、**jaxb-provider** 等表示不同的数据提供者模块，分别为 Atom、Jackson、JAXB 等提供支持。
# - **test** 包中的是用于测试功能的模块。
# - **optional** 是一些可选功能模块，如 `resteasy-cdi`、`resteasy-guice`，这些模块不是 `Resteasy` 的核心，但提供了额外的集成功能。
# - **netty3** 和 **netty4** 是 `Resteasy` 与不同版本的 Netty 框架集成的模块，用于网络通信支持。
# - **Maven打包宏**：`%mvn_package` 是一个 RPM 宏，专门用于处理基于 Maven 的 Java 项目打包，它会帮助将 Maven 的构建内容放入相应的 RPM 包中。
# - **模块化设计**：这一部分通过不同的子包（如 `core`、`atom-provider`、`optional` 等）将 `Resteasy` 的功能进行模块化，使得用户可以按需安装不同的功能模块。
%mvn_package ":resteasy-jaxrs" core  # 把 `resteasy-jaxrs` Maven 模块打包到 `core` 子包中。`resteasy-jaxrs` 是 Resteasy 的核心模块，用于实现 JAX-RS 规范。
%mvn_package ":providers-pom" core # 把 `providers-pom` 模块打包到 `core` 子包中。`providers-pom` 是 `Resteasy` 各种数据格式提供者（如 JSON、XML）模块的汇总。
%mvn_package ":resteasy-jaxrs-all" core # 把 `resteasy-jaxrs-all` 模块打包到 `core` 中，它可能包含了所有的 `jaxrs` 相关功能的打包集合。
%mvn_package ":resteasy-pom" core
%mvn_package ":resteasy-atom-provider" atom-provider
%mvn_package ":resteasy-jackson-provider" jackson-provider
%mvn_package ":resteasy-jackson2-provider" jackson2-provider
%mvn_package ":resteasy-jaxb-provider" jaxb-provider
%mvn_package ":resteasy-jettison-provider" jettison-provider
%mvn_package ":resteasy-json-p-provider" json-p-provider
%mvn_package ":resteasy-multipart-provider" multipart-provider
%mvn_package ":resteasy-validator-provider-11" validator-provider-11
%mvn_package ":resteasy-yaml-provider" yaml-provider
%mvn_package ":resteasy-client" client
%mvn_package ":test-resteasy-html" test
%mvn_package ":test-all-jaxb" test
%mvn_package ":test-jackson-jaxb-coexistence" test
%mvn_package ":resteasy-jaxrs-testsuite" test
%mvn_package ":async-http-servlet-3.0" optional
%mvn_package ":asynch-http-servlet-3.0-pom" optional
%mvn_package ":http-adapter-pom" optional
%mvn_package ":jose-jwt" optional
%mvn_package ":resteasy-bom" optional
%mvn_package ":resteasy-cache-core" optional
%mvn_package ":resteasy-cache-pom" optional
%mvn_package ":resteasy-cdi" optional
%mvn_package ":resteasy-crypto" optional
%mvn_package ":resteasy-guice" optional
%mvn_package ":resteasy-html" optional
%mvn_package ":resteasy-jdk-http" optional
%mvn_package ":resteasy-jsapi" optional
%mvn_package ":resteasy-keystone-core" optional
%mvn_package ":resteasy-links" optional
%mvn_package ":resteasy-netty4" optional
%mvn_package ":resteasy-netty4-cdi" optional
%mvn_package ":resteasy-oauth" optional
%mvn_package ":resteasy-servlet-initializer" optional
%mvn_package ":resteasy-undertow" optional
%mvn_package ":resteasy-wadl" optional
%mvn_package ":security-pom" optional
%mvn_package ":tjws" optional
%mvn_package ":resteasy-netty" netty3
find -name '*.jar' -print -delete

# 这部分包含多个 RPM spec 文件中的 Maven 宏，这些宏是专门用来修改基于 Maven 构建系统的项目配置的。在 RPM 包管理中，Maven 宏帮助处理依赖、禁用模块、应用补丁等操作。让我们逐个解释这些宏的含义：
%patch 0 # 这些宏用于应用补丁（patch）。在 RPM 构建过程中，`%patch` 会应用指定的补丁文件，以修改源代码。
%patch 1
%patch 2
%patch 3
%patch 4
%patch 5
%pom_disable_module resteasy-spring jaxrs # 用于禁用 Maven 构建中的某些模块。Maven 项目通常是模块化的，每个模块代表特定的功能或组件。通过这个宏，可以跳过不需要构建的模块。
%pom_disable_module fastinfoset jaxrs/providers
%pom_disable_module examples jaxrs
%pom_disable_module profiling-tests jaxrs
%pom_disable_module resteasy-test-data jaxrs
%pom_disable_module war-tests jaxrs
%pom_disable_module jboss-modules jaxrs
%pom_disable_module login-module-authenticator jaxrs/security
%pom_disable_module skeleton-key-idm jaxrs/security
%pom_disable_module keystone/keystone-as7 jaxrs/security
%pom_disable_module keystone/keystone-as7-modules jaxrs/security
%pom_disable_module test-jackson-jaxb-coexistence jaxrs/providers
%pom_disable_module test-resteasy-html jaxrs/providers
%pom_disable_module arquillian jaxrs
%pom_disable_module async-http-servlet-3.0-test jaxrs/async-http-servlet-3.0
%pom_disable_module callback-test jaxrs/async-http-servlet-3.0
%pom_disable_module resteasy-hibernatevalidator-provider jaxrs/providers
%pom_remove_plugin com.atlassian.maven.plugins:maven-clover2-plugin jaxrs # 从 Maven 项目中移除特定的插件。Maven 插件通常用于构建过程中执行特定任务（如测试覆盖率、报告生成等）。通过这个宏，可以移除不需要的插件，简化构建过程。
%pom_remove_plugin com.atlassian.maven.plugins:maven-clover2-plugin jaxrs/resteasy-jaxrs
%pom_change_dep "javax.servlet:servlet-api" "org.jboss.spec.javax.servlet:jboss-servlet-api_2.5_spec" jaxrs/tjws # 更改 Maven 项目中的依赖项。通过这个宏，可以替换项目的依赖项，指定替换后的依赖库。
%pom_xpath_set pom:properties/pom:dep.netty.version 3 jaxrs # 通过 XPath 表达式更改 Maven 项目中的 `pom.xml` 文件中的内容。它可以用来设置或修改特定的配置属性。
%pom_remove_dep -r javax.activation:activation jaxrs jaxrs/resteasy-jaxrs jaxrs/resteasy-test-data # 用于移除 Maven 项目中的某个依赖项。这个宏可以从指定的模块中删除不必要的依赖项。
%pom_remove_dep :tjws::test jaxrs/resteasy-jaxrs-testsuite
files='
jaxrs/resteasy-jaxrs/src/main/java/org/jboss/resteasy/annotations/Query.java
jaxrs/resteasy-jaxrs/src/main/java/org/jboss/resteasy/core/QueryInjector.java
jaxrs/resteasy-jsapi/src/main/java/org/jboss/resteasy/jsapi/JSAPIWriter.java
jaxrs/resteasy-jsapi/src/main/java/org/jboss/resteasy/jsapi/JSAPIServlet.java
jaxrs/resteasy-jsapi/src/main/java/org/jboss/resteasy/jsapi/ServiceRegistry.java
jaxrs/resteasy-links/src/main/java/org/jboss/resteasy/links/AddLinks.java
jaxrs/resteasy-links/src/main/java/org/jboss/resteasy/links/ELProvider.java
jaxrs/resteasy-links/src/main/java/org/jboss/resteasy/links/LinkELProvider.java
jaxrs/resteasy-links/src/main/java/org/jboss/resteasy/links/LinkResource.java
jaxrs/resteasy-links/src/main/java/org/jboss/resteasy/links/LinkResources.java
jaxrs/resteasy-links/src/main/java/org/jboss/resteasy/links/ParentResource.java
jaxrs/resteasy-links/src/main/java/org/jboss/resteasy/links/RESTServiceDiscovery.java
jaxrs/resteasy-links/src/main/java/org/jboss/resteasy/links/ResourceFacade.java
jaxrs/resteasy-links/src/main/java/org/jboss/resteasy/links/ResourceID.java
jaxrs/resteasy-links/src/main/java/org/jboss/resteasy/links/ResourceIDs.java
jaxrs/security/resteasy-oauth/src/main/java/org/jboss/resteasy/auth/oauth/OAuthConsumer.java
jaxrs/security/resteasy-oauth/src/main/java/org/jboss/resteasy/auth/oauth/OAuthException.java
jaxrs/security/resteasy-oauth/src/main/java/org/jboss/resteasy/auth/oauth/OAuthFilter.java
jaxrs/security/resteasy-oauth/src/main/java/org/jboss/resteasy/auth/oauth/OAuthMemoryProvider.java
jaxrs/security/resteasy-oauth/src/main/java/org/jboss/resteasy/auth/oauth/OAuthProvider.java
jaxrs/security/resteasy-oauth/src/main/java/org/jboss/resteasy/auth/oauth/OAuthProviderChecker.java
jaxrs/security/resteasy-oauth/src/main/java/org/jboss/resteasy/auth/oauth/OAuthRequestToken.java
jaxrs/security/resteasy-oauth/src/main/java/org/jboss/resteasy/auth/oauth/OAuthServlet.java
jaxrs/security/resteasy-oauth/src/main/java/org/jboss/resteasy/auth/oauth/OAuthToken.java
jaxrs/security/resteasy-oauth/src/main/java/org/jboss/resteasy/auth/oauth/OAuthValidator.java
'
for f in ${files}; do
native2ascii -encoding UTF8 ${f} ${f} # 用于将指定的源代码文件从 UTF-8 编码转换为 ASCII 编码。它使用了 `native2ascii` 工具，该工具主要用于处理 Java 的国际化（i18n）资源，将包含非 ASCII 字符的文件转换为可在 ASCII 环境下使用的形式。
### 逐行解释
done
%pom_add_plugin org.apache.maven.plugins:maven-source-plugin jaxrs '
<configuration>
 <skipSource>true</skipSource>
</configuration>'

# 于在 Maven 项目（`pom.xml` 文件）中添加依赖项。`%pom_add_dep` 是 RPM 构建脚本中常见的一个宏，用于修改 Maven 项目文件（`pom.xml`），具体来说就是向 `pom.xml` 中加入依赖项（dependencies）。
# 它的格式通常是：`%pom_add_dep <groupId>:<artifactId>:<version> [<module>]`。
# - **`groupId`**：依赖的组织或项目标识。
# - **`artifactId`**：依赖的具体模块标识。
# - **`version`**：依赖的版本号。
# - **`module`**（可选）：指定依赖添加到哪个 Maven 模块中，通常用于多模块项目。
%pom_add_dep org.jboss.spec.javax.annotation:jboss-annotations-api_1.2_spec:1.0.2.Final protocol
%pom_add_dep org.jboss.spec.javax.annotation:jboss-annotations-api_1.2_spec:1.0.2.Final core-security/implementation
%pom_add_dep org.jboss.spec.javax.annotation:jboss-annotations-api_1.2_spec:1.0.2.Final version
%pom_add_dep org.jboss.spec.javax.annotation:jboss-annotations-api_1.2_spec:1.0.2.Final launcher

%build
export JAVA_HOME=%{_jvmdir}/java-11-openjdk # 通过设置 `JAVA_HOME` 环境变量来指定使用的 JDK 版本。
%mvn_build -f # 用于构建 Maven 项目。-f参数告诉 Maven 使用指定的 `pom.xml` 文件。这里的 `-f` 参数表示使用当前路径下的 `pom.xml` 文件进行构建。
find -name 'resteasy-*-%{namedversion}.jar' | while read f; do
  java -cp $(build-classpath jandex) org.jboss.jandex.Main -j ${f}
done

%install
%mvn_install # - 用于安装 Maven 构建结果的宏。
find -name "resteasy-*-jandex.jar" | while read f; do
  install -pm 644 ${f} %{buildroot}%{_javadir}/%{name}/$(basename -s "-%{namedversion}-jandex.jar" $f)-jandex.jar
done

# `%files` 用于指定哪些文件和目录应该包含在 RPM 包中。每个 `%files` 块可以定义不同的子包（比如 `core`, `atom-provider`, `jackson-provider` 等）。
# `%files` 块后面没有任何包名，意味着这是定义基础包（默认包）的文件列表。
%files
%doc README.md jaxrs/README.html # 该文件是文档文件，RPM 安装时会自动将这些文件标记为文档。通常它们会被安装到 `/usr/share/doc` 目录。
%license jaxrs/License.html # 用于指定许可证文件，类似于 `%doc`，但用于标记许可文件。通常这些文件会被安装到 `/usr/share/licenses` 目录中。

%files core -f .mfiles-core
%{_javadir}/%{name}/resteasy-jaxrs-jandex.jar

%files atom-provider -f .mfiles-atom-provider
%{_javadir}/%{name}/resteasy-atom-provider-jandex.jar

%files jackson-provider -f .mfiles-jackson-provider
%{_javadir}/%{name}/resteasy-jackson-provider-jandex.jar

%files jackson2-provider -f .mfiles-jackson2-provider
%{_javadir}/%{name}/resteasy-jackson2-provider-jandex.jar

%files jaxb-provider -f .mfiles-jaxb-provider
%{_javadir}/%{name}/resteasy-jaxb-provider-jandex.jar

%files jettison-provider -f .mfiles-jettison-provider
%{_javadir}/%{name}/resteasy-jettison-provider-jandex.jar

%files json-p-provider -f .mfiles-json-p-provider
%{_javadir}/%{name}/resteasy-json-p-provider-jandex.jar

%files multipart-provider -f .mfiles-multipart-provider
%{_javadir}/%{name}/resteasy-multipart-provider-jandex.jar

%files netty3 -f .mfiles-netty3
%{_javadir}/%{name}/resteasy-netty-jandex.jar

%files validator-provider-11 -f .mfiles-validator-provider-11
%{_javadir}/%{name}/resteasy-validator-provider-11-jandex.jar

%files yaml-provider -f .mfiles-yaml-provider
%{_javadir}/%{name}/resteasy-yaml-provider-jandex.jar

%files client -f .mfiles-client
%{_javadir}/%{name}/resteasy-client-jandex.jar

%files optional -f .mfiles-optional
%{_javadir}/%{name}/resteasy-cache-core-jandex.jar
%{_javadir}/%{name}/resteasy-cdi-jandex.jar
%{_javadir}/%{name}/resteasy-crypto-jandex.jar
%{_javadir}/%{name}/resteasy-guice-jandex.jar
%{_javadir}/%{name}/resteasy-html-jandex.jar
%{_javadir}/%{name}/resteasy-jdk-http-jandex.jar
%{_javadir}/%{name}/resteasy-jsapi-jandex.jar
%{_javadir}/%{name}/resteasy-keystone-core-jandex.jar
%{_javadir}/%{name}/resteasy-links-jandex.jar
%{_javadir}/%{name}/resteasy-netty4-cdi-jandex.jar
%{_javadir}/%{name}/resteasy-netty4-jandex.jar
%{_javadir}/%{name}/resteasy-oauth-jandex.jar
%{_javadir}/%{name}/resteasy-servlet-initializer-jandex.jar
%{_javadir}/%{name}/resteasy-undertow-jandex.jar
%{_javadir}/%{name}/resteasy-wadl-jandex.jar

%files test -f .mfiles-test
%{_javadir}/%{name}/resteasy-jaxrs-testsuite-jandex.jar

%files javadoc -f .mfiles-javadoc
%license jaxrs/License.html

%changelog
* Sat Oct 12 2024 Yangfan Ruan <yangfan.oerv@isrc.iscas.ac.cn> - 3.0.19-6
- compile with openjdk11

* Mon May 9 2022 baizhonggui <baizhonggui@h-partners.com> - 3.0.19-5
- modify license identifier

* Thu Jun 10 2021 wangyue <wangyue92@huawei.com> - 3.0.19-4
- fix CVE-2020-10688

* Thu Apr 22 2021 lingsheng <lingsheng@huawei.com> - 3.0.19-3
- fix CVE-2021-20289

* Fri Jan 29 2021 wangxiao <wangxiao65@huawe.com> - 3.0.19-2
- fix CVE-2016-9606

* Wed Oct 28 2020 baizhonggui <baizhonggui@huawei.com> - 3.0.19-1
- package init

```

